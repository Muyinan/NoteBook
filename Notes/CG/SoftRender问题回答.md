**1．请用自己的话简述渲染管线的主要阶段和每个阶段的作用**

​		渲染管线主要分为顶点着色器->MVP变换->裁剪->视口变换->光栅化->片元着色器

​		(1)  顶点着色器。对顶点进行预处理，我编写的渲染管线里只是加载顶点坐标，并没有进行任何额外的处理。但是根据百度得知顶点着色器可以实现水面上下波动等的效果，这应该就是顶点着色器根据顶点的xy坐标增加或者移动了z坐标实现的(简单猜测，当然实际上肯定更复杂)。

​		(2) MVP变换。分别是模型变换(Model)、相机变换(View)、投影变换(Projection)。需要注意的是相机变换时正面方向是观察空间z轴的正方向还是负方向。如果是正方向那么观察空间就会变成左手坐标系。

​		(3) 裁剪。若三角面在6个裁剪平面之外则直接剔除，不进行之后的视口变换光栅化等操作。若三角面与裁剪平面相交，则将在裁剪平面之外的部分剔除，将在裁剪平面内部的多边形重新裁剪为若干个新三角形送去光栅化等后续操作。

​		(4) 视口变换。将CVV的长宽拉成视口的长宽，从而可以知道每个像素点对应到原CVV空间的哪个位置。

​		(5) 光栅化。将三角形映射到视口，可以用三角形的AABB框来加速。

​		(6) 片元着色器。对三角形对应的每一个像素进行处理，由于只有三角形的三个顶点才具有信息，因此要得到每一个像素的信息还需要进行透视矫正后的重心插值操作。

**2．请用自己的话简述MVP矩阵变换的目的**

​		 MVP变换是将经过仿射变换后，原本在世界坐标下的模型坐标，转换为在观察坐标系下的坐标。并且原本在相机视锥下的锥台会被转换成1*1*1的立方体。其中模型变换的作用是移动、旋转、放大缩小模型；相机变换的作用是将世界坐标转换为观察坐标，此时相机会处于坐标原点，目的是方便之后的计算；投影变换则是将锥台压缩乘标准立方体，方便之后的光栅化。

**3．什么是齐次坐标以及为什么需要齐次坐标？**

​		 齐次坐标就是在向量后边再加上一维，举例来说一个三维点(x,y,z)的齐次坐标是(x,y,z,1)，三维向量(x,y,z)的齐次坐标是(x,y,z,0)。用到齐次坐标是因为仿射变换里的平移变换无法转换成3\*3的矩阵，但是采用齐次坐标之后就可以转化成4\*4的矩阵，这样一系列的仿射变换就可以依次相乘之后简化成一个矩阵。

**4．什么是透视矫正以及为什么需要透视矫正？**

​		在经过透视投影矩阵变换后的CVV空间并是非线性空间，因为CVV是由一个视锥体“挤压”得到的。这时只采用简单的重心插值得到的结果并不是完全准确的，因此需要加上透视矫正才能得到正确的重心插值结果。

**5．什么是切线空间以及为什么需要切线空间？**

​		 切线空间是以顶点的法线方向为Z轴，以u变换方向为T(tangent)轴，可以通过偏导求出，以T和Z的叉乘向量为B(Bitangent)轴，这三个轴组成的坐标系空间。切线空间主要用来做法线贴图，具体的像纹理一样把对每一个顶点的法线进行的更改以RGB的形式存储在一张图片里成为法线贴图，然后在PS里计算光照时将顶点的法线按照这个值进行更改，然后就得到了新的光照。切线空间的优势在于当模型的位置发生变化时，法线贴图仍然可以有效的发挥作用，因为贴图的Z轴会跟着顶点法线的改变而改变，从而一张法线贴图便可以应用各个不同位置的模型上去。

**6．实现过程中碰到的其他问题与解决办法**

​		太多了。。。之后再补充



![image-20240229112313614](..\..\Resource\PixPin_2024-02-29_11-24-14.png)